<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head}"></head>
<body>
<nav th:replace="~{layout :: nav}"></nav>
<section class="pure-u-24-24">
    <div style="padding: 2rem 1rem 0rem 1rem;">
        <button class="pure-button" onclick="deleteAllData()">Delete all data</button>
        <script>
            async function deleteAllData(){
                await fetch('./', { method: 'DELETE' });
            }
        </script>
    </div>
    <div style="padding: 1rem;">
        <h2>Transactions (<span th:text="${transactionsCount}"></span>)</h2>
        <table class="pure-table" id="transactions-table" style="width: 100%;">
            <thead>
            <tr>
                <th>Transaction ID</th>
                <th>Date</th>
                <th>Units count</th>
                <th>Price per unit</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="transaction: ${transactions}">
                <td th:text="${transaction.formattedId}" />
                <td th:text="${transaction.formattedDate}" />
                <td th:text="${transaction.unitsCount}" />
                <td th:text="${transaction.pricePerUnit}" />
            </tr>
            </tbody>
        </table>
        <div class="pure-g" style="margin-top: 1rem;">
            <div class="pure-u-10-24">
                <a class="pure-button" th:href="@{'../?transactionsPage=' + ${previousTransactionsPage}}" th:if="${previousTransactionsPage != null}">Previous page</a>
            </div>
            <div class="pure-u-4-24" th:text="@{'Page ' + ${currentTransactionsPage} + ' of ' + ${totalTransactionsPages}}" style="text-align: center;"></div>
            <div class="pure-u-10-24" style="text-align: right;">
                <a class="pure-button" th:href="@{'../?transactionsPage=' + ${nextTransactionsPage}}" th:if="${nextTransactionsPage != null}">Next page</a>
            </div>
        </div>
    </div>
</section>
<div class="pure-g">
    <section class="pure-u-12-24">
        <div style="padding: 1rem;">
            <h2>Sale Orders (<span th:text="${saleOrdersCount}"></span>)</h2>
            <table class="pure-table" id="sale-order-table" style="width: 100%;">
                <thead>
                <tr>
                    <th>Sale Order ID</th>
                    <th>Units count</th>
                    <th>Price per unit</th>
                    <th>Placed date</th>
                    <th>Valid to</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="saleOrder: ${saleOrders}">
                    <td th:text="${saleOrder.formattedId}" />
                    <td th:text="${saleOrder.unitsCount}" />
                    <td th:text="${saleOrder.pricePerUnit}" />
                    <td th:text="${saleOrder.formattedPlacedDate}" />
                    <td th:text="${saleOrder.formattedValidTo}" />
                </tr>
                </tbody>
            </table>
            <div class="pure-g" style="margin-top: 1rem;">
                <div class="pure-u-10-24">
                    <a class="pure-button" th:href="@{'../?saleOrdersPage=' + ${previousSaleOrdersPage}}" th:if="${previousSaleOrdersPage != null}">Previous page</a>
                </div>
                <div class="pure-u-4-24" th:text="@{'Page ' + ${currentSaleOrdersPage} + ' of ' + ${totalSaleOrdersPages}}" style="text-align: center;"></div>
                <div class="pure-u-10-24" style="text-align: right;">
                    <a class="pure-button" th:href="@{'../?saleOrdersPage=' + ${nextSaleOrdersPage}}" th:if="${nextSaleOrdersPage != null}">Next page</a>
                </div>
            </div>
        </div>
    </section>
    <section class="pure-u-12-24">
        <div style="padding: 1rem;">
            <h2>Purchase Orders (<span th:text="${purchaseOrdersCount}"></span>)</h2>
            <table class="pure-table" id="purchase-order-table" style="width: 100%;">
                <thead>
                <tr>
                    <th>Purchase Order ID</th>
                    <th>Units count</th>
                    <th>Price per unit</th>
                    <th>Placed date</th>
                    <th>Valid to</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="purchaseOrder: ${purchaseOrders}">
                    <td th:text="${purchaseOrder.formattedId}" />
                    <td th:text="${purchaseOrder.unitsCount}" />
                    <td th:text="${purchaseOrder.pricePerUnit}" />
                    <td th:text="${purchaseOrder.formattedPlacedDate}" />
                    <td th:text="${purchaseOrder.formattedValidTo}" />
                </tr>
                </tbody>
            </table>
            <div class="pure-g" style="margin-top: 1rem;">
                <div class="pure-u-10-24">
                    <a class="pure-button" th:href="@{'../?purchaseOrdersPage=' + ${previousPurchaseOrdersPage}}" th:if="${previousPurchaseOrdersPage != null}">Previous page</a>
                </div>
                <div class="pure-u-4-24" th:text="@{'Page ' + ${currentPurchaseOrdersPage} + ' of ' + ${totalPurchaseOrdersPages}}" style="text-align: center;"></div>
                <div class="pure-u-10-24" style="text-align: right;">
                    <a class="pure-button" th:href="@{'../?purchaseOrdersPage=' + ${nextPurchaseOrdersPage}}" th:if="${nextPurchaseOrdersPage != null}">Next page</a>
                </div>
            </div>
        </div>
    </section>
    </div>
</div>
<footer th:replace="~{layout :: footer}"></footer>
</body>
</html>